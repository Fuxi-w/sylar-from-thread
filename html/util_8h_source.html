<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sylar-from-scratch: sylar/util.h 源文件</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sylar-from-scratch
   </div>
   <div id="projectbrief">从零开始重写sylar C++高性能分布式服务器框架</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_85140288eee94f6c1dbd59c496fa876b.html">sylar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">util.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="util_8h.html">浏览该文件的文档.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#ifndef __SYLAR_UTIL_H__</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#define __SYLAR_UTIL_H__</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;cxxabi.h&gt;</span> <span class="comment">// for abi::__cxa_demangle()</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">namespace </span>sylar {</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;pid_t <a class="code" href="util_8cpp.html#a7e8a51657b5b5289d1c530f5914bcee8">GetThreadId</a>();</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;uint64_t <a class="code" href="util_8cpp.html#a83fa12d12d237c60b894483ed72d0527">GetFiberId</a>();</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;uint64_t <a class="code" href="util_8cpp.html#a3a496fbdbd27f04cba087a64add0306c">GetElapsedMS</a>();</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;std::string <a class="code" href="util_8cpp.html#aec6beb0b77d38e3928b748438b86a1aa">GetThreadName</a>();</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keywordtype">void</span> <a class="code" href="util_8cpp.html#ae2cc9a02f0465026fe60111cbb58b636">SetThreadName</a>(<span class="keyword">const</span> std::string &amp;name);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keywordtype">void</span> <a class="code" href="util_8cpp.html#a979537064cb924a4471df38add5686cb">Backtrace</a>(std::vector&lt;std::string&gt; &amp;bt, <span class="keywordtype">int</span> size = 64, <span class="keywordtype">int</span> skip = 1);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;std::string <a class="code" href="util_8cpp.html#a11e102f2ca9ed35760090afccd9387ff">BacktraceToString</a>(<span class="keywordtype">int</span> size = 64, <span class="keywordtype">int</span> skip = 2, <span class="keyword">const</span> std::string &amp;prefix = <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;uint64_t <a class="code" href="util_8cpp.html#ae39a238868576cbc0c1fac03221e3d60">GetCurrentMS</a>();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;uint64_t <a class="code" href="util_8cpp.html#aa2c597c6caae5df27aa7cc95c75fadfe">GetCurrentUS</a>();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;std::string <a class="code" href="util_8cpp.html#ade7d65909cd0ce7f024ae7593ddc21e9">ToUpper</a>(<span class="keyword">const</span> std::string &amp;name);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;std::string <a class="code" href="util_8cpp.html#a0c9db554dae766cd39a3785fc47dc5b3">ToLower</a>(<span class="keyword">const</span> std::string &amp;name);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;std::string <a class="code" href="util_8cpp.html#a2a3eab16f42dad7f48ec91a2d15ac6b7">Time2Str</a>(time_t ts = time(0), <span class="keyword">const</span> std::string &amp;format = <span class="stringliteral">&quot;%Y-%m-%d %H:%M:%S&quot;</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;time_t <a class="code" href="util_8cpp.html#a4188abb21419d9807897fd545f267dd5">Str2Time</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keyword">const</span> <span class="keywordtype">char</span> *format = <span class="stringliteral">&quot;%Y-%m-%d %H:%M:%S&quot;</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="classsylar_1_1FSUtil.html">   98</a></span>&#160;<span class="keyword">class </span><a class="code" href="classsylar_1_1FSUtil.html">FSUtil</a> {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classsylar_1_1FSUtil.html#a9cbce59b838f5bbf515043ddb343c096">ListAllFile</a>(std::vector&lt;std::string&gt; &amp;files, <span class="keyword">const</span> std::string &amp;path, <span class="keyword">const</span> std::string &amp;subfix);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classsylar_1_1FSUtil.html#aff8e1690b306cbb5d66586c77377c683">Mkdir</a>(<span class="keyword">const</span> std::string &amp;dirname);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classsylar_1_1FSUtil.html#ad1de52402acd1f25e009c6f467b11826">IsRunningPidfile</a>(<span class="keyword">const</span> std::string &amp;pidfile);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classsylar_1_1FSUtil.html#a2c75a0dcd9a33a0a4e643df37237309b">Rm</a>(<span class="keyword">const</span> std::string &amp;path);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classsylar_1_1FSUtil.html#ac4428525255f31ab2f1ee3f5fb9c16a8">Mv</a>(<span class="keyword">const</span> std::string &amp;from, <span class="keyword">const</span> std::string &amp;to);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classsylar_1_1FSUtil.html#a63a63d87803f801db051e3328351e113">Realpath</a>(<span class="keyword">const</span> std::string &amp;path, std::string &amp;rpath);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classsylar_1_1FSUtil.html#a732e5749e23cebeb2b12a0593292b3fa">Symlink</a>(<span class="keyword">const</span> std::string &amp;from, <span class="keyword">const</span> std::string &amp;to);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classsylar_1_1FSUtil.html#a02e6f68ccc238f7984e3085bd2a2f2c5">Unlink</a>(<span class="keyword">const</span> std::string &amp;filename, <span class="keywordtype">bool</span> exist = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="classsylar_1_1FSUtil.html#aa25b73f8771c2188aeb366da4ee8b76d">Dirname</a>(<span class="keyword">const</span> std::string &amp;filename);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="classsylar_1_1FSUtil.html#ad23fa9a618ca7a0641fd1c7219c7f39a">Basename</a>(<span class="keyword">const</span> std::string &amp;filename);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classsylar_1_1FSUtil.html#a6f08f9b5b770b6241c566a16247077c9">OpenForRead</a>(std::ifstream &amp;ifs, <span class="keyword">const</span> std::string &amp;filename, std::ios_base::openmode mode);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classsylar_1_1FSUtil.html#ac196c780946c97e3ae159c36c713bbea">OpenForWrite</a>(std::ofstream &amp;ofs, <span class="keyword">const</span> std::string &amp;filename, std::ios_base::openmode mode);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;};</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classsylar_1_1TypeUtil.html">  199</a></span>&#160;<span class="keyword">class </span><a class="code" href="classsylar_1_1TypeUtil.html">TypeUtil</a> {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keyword">static</span> int8_t <a class="code" href="classsylar_1_1TypeUtil.html#a7a755d4f90a24997207928ed248ce598">ToChar</a>(<span class="keyword">const</span> std::string &amp;str);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keyword">static</span> int64_t <a class="code" href="classsylar_1_1TypeUtil.html#a7e9ed02f327254eabdfe73a8eea13539">Atoi</a>(<span class="keyword">const</span> std::string &amp;str);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classsylar_1_1TypeUtil.html#a1799c89c36513c69f0da30cb1e7641c3">Atof</a>(<span class="keyword">const</span> std::string &amp;str);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">static</span> int8_t <a class="code" href="classsylar_1_1TypeUtil.html#a7a755d4f90a24997207928ed248ce598">ToChar</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keyword">static</span> int64_t <a class="code" href="classsylar_1_1TypeUtil.html#a7e9ed02f327254eabdfe73a8eea13539">Atoi</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classsylar_1_1TypeUtil.html#a1799c89c36513c69f0da30cb1e7641c3">Atof</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;};</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="util_8h.html#a2ba133bec98e7a279fe30ff590f9d58e">  219</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="util_8h.html#a2ba133bec98e7a279fe30ff590f9d58e">TypeToName</a>() {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *s_name = abi::__cxa_demangle(<span class="keyword">typeid</span>(T).name(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> s_name;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classsylar_1_1StringUtil.html">  227</a></span>&#160;<span class="keyword">class </span><a class="code" href="classsylar_1_1StringUtil.html">StringUtil</a> {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="classsylar_1_1StringUtil.html#a7f53849da25b4642d8780143cfe6ef70">Format</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* fmt, ...);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="classsylar_1_1StringUtil.html#a08d9e77c34393d5c6a4ef945839c558f">Formatv</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* fmt, va_list ap);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="classsylar_1_1StringUtil.html#a1fb3054f978e1f835831135b10276f2e">UrlEncode</a>(<span class="keyword">const</span> std::string&amp; str, <span class="keywordtype">bool</span> space_as_plus = <span class="keyword">true</span>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="classsylar_1_1StringUtil.html#a75982835040860f66162f9de0cfa53e6">UrlDecode</a>(<span class="keyword">const</span> std::string&amp; str, <span class="keywordtype">bool</span> space_as_plus = <span class="keyword">true</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="classsylar_1_1StringUtil.html#a0a812b3307ea4806851dbeabdbf1cb20">Trim</a>(<span class="keyword">const</span> std::string&amp; str, <span class="keyword">const</span> std::string&amp; delimit = <span class="stringliteral">&quot; \t\r\n&quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="classsylar_1_1StringUtil.html#af372a93baa56673ef9b33cf586253e97">TrimLeft</a>(<span class="keyword">const</span> std::string&amp; str, <span class="keyword">const</span> std::string&amp; delimit = <span class="stringliteral">&quot; \t\r\n&quot;</span>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="classsylar_1_1StringUtil.html#a37d7185797b931c1be452f33570c3a3a">TrimRight</a>(<span class="keyword">const</span> std::string&amp; str, <span class="keyword">const</span> std::string&amp; delimit = <span class="stringliteral">&quot; \t\r\n&quot;</span>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keyword">static</span> std::string <a class="code" href="classsylar_1_1StringUtil.html#adf7d7bc32715c9c3c09ccd9457190a16">WStringToString</a>(<span class="keyword">const</span> std::wstring&amp; ws);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keyword">static</span> std::wstring <a class="code" href="classsylar_1_1StringUtil.html#ab00e98fdad318537efe7c95bffd71426">StringToWString</a>(<span class="keyword">const</span> std::string&amp; s);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;};</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;} <span class="comment">// namespace sylar</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// __SYLAR_UTIL_H__</span></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html"><div class="ttname"><a href="classsylar_1_1FSUtil.html">sylar::FSUtil</a></div><div class="ttdoc">文件系统操作类</div><div class="ttdef"><b>Definition:</b> util.h:98</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_a02e6f68ccc238f7984e3085bd2a2f2c5"><div class="ttname"><a href="classsylar_1_1FSUtil.html#a02e6f68ccc238f7984e3085bd2a2f2c5">sylar::FSUtil::Unlink</a></div><div class="ttdeci">static bool Unlink(const std::string &amp;filename, bool exist=false)</div><div class="ttdoc">删除文件，参考unlink(2)</div><div class="ttdef"><b>Definition:</b> util.cpp:233</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_a2c75a0dcd9a33a0a4e643df37237309b"><div class="ttname"><a href="classsylar_1_1FSUtil.html#a2c75a0dcd9a33a0a4e643df37237309b">sylar::FSUtil::Rm</a></div><div class="ttdeci">static bool Rm(const std::string &amp;path)</div><div class="ttdoc">删除文件或路径</div><div class="ttdef"><b>Definition:</b> util.cpp:240</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_a63a63d87803f801db051e3328351e113"><div class="ttname"><a href="classsylar_1_1FSUtil.html#a63a63d87803f801db051e3328351e113">sylar::FSUtil::Realpath</a></div><div class="ttdeci">static bool Realpath(const std::string &amp;path, std::string &amp;rpath)</div><div class="ttdoc">返回绝对路径，参考realpath(3)</div><div class="ttdef"><b>Definition:</b> util.cpp:277</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_a6f08f9b5b770b6241c566a16247077c9"><div class="ttname"><a href="classsylar_1_1FSUtil.html#a6f08f9b5b770b6241c566a16247077c9">sylar::FSUtil::OpenForRead</a></div><div class="ttdeci">static bool OpenForRead(std::ifstream &amp;ifs, const std::string &amp;filename, std::ios_base::openmode mode)</div><div class="ttdoc">以只读方式打开</div><div class="ttdef"><b>Definition:</b> util.cpp:323</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_a732e5749e23cebeb2b12a0593292b3fa"><div class="ttname"><a href="classsylar_1_1FSUtil.html#a732e5749e23cebeb2b12a0593292b3fa">sylar::FSUtil::Symlink</a></div><div class="ttdeci">static bool Symlink(const std::string &amp;from, const std::string &amp;to)</div><div class="ttdoc">创建符号链接，参考symlink(2)</div><div class="ttdef"><b>Definition:</b> util.cpp:290</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_a9cbce59b838f5bbf515043ddb343c096"><div class="ttname"><a href="classsylar_1_1FSUtil.html#a9cbce59b838f5bbf515043ddb343c096">sylar::FSUtil::ListAllFile</a></div><div class="ttdeci">static void ListAllFile(std::vector&lt; std::string &gt; &amp;files, const std::string &amp;path, const std::string &amp;subfix)</div><div class="ttdoc">递归列举指定目录下所有指定后缀的常规文件，如果不指定后缀，则遍历所有文件，返回的文件名带路径</div><div class="ttdef"><b>Definition:</b> util.cpp:138</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_aa25b73f8771c2188aeb366da4ee8b76d"><div class="ttname"><a href="classsylar_1_1FSUtil.html#aa25b73f8771c2188aeb366da4ee8b76d">sylar::FSUtil::Dirname</a></div><div class="ttdeci">static std::string Dirname(const std::string &amp;filename)</div><div class="ttdoc">返回文件，即路径中最后一个/前面的部分，不包括/本身，如果未找到，则返回filename</div><div class="ttdef"><b>Definition:</b> util.cpp:297</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_ac196c780946c97e3ae159c36c713bbea"><div class="ttname"><a href="classsylar_1_1FSUtil.html#ac196c780946c97e3ae159c36c713bbea">sylar::FSUtil::OpenForWrite</a></div><div class="ttdeci">static bool OpenForWrite(std::ofstream &amp;ofs, const std::string &amp;filename, std::ios_base::openmode mode)</div><div class="ttdoc">以只写方式打开</div><div class="ttdef"><b>Definition:</b> util.cpp:328</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_ac4428525255f31ab2f1ee3f5fb9c16a8"><div class="ttname"><a href="classsylar_1_1FSUtil.html#ac4428525255f31ab2f1ee3f5fb9c16a8">sylar::FSUtil::Mv</a></div><div class="ttdeci">static bool Mv(const std::string &amp;from, const std::string &amp;to)</div><div class="ttdoc">移动文件或路径，内部实现是先Rm(to)，再rename(from, to)，参考rename</div><div class="ttdef"><b>Definition:</b> util.cpp:270</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_ad1de52402acd1f25e009c6f467b11826"><div class="ttname"><a href="classsylar_1_1FSUtil.html#ad1de52402acd1f25e009c6f467b11826">sylar::FSUtil::IsRunningPidfile</a></div><div class="ttdeci">static bool IsRunningPidfile(const std::string &amp;pidfile)</div><div class="ttdoc">判断指定pid文件指定的pid是否正在运行，使用kill(pid, 0)的方式判断</div><div class="ttdef"><b>Definition:</b> util.cpp:211</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_ad23fa9a618ca7a0641fd1c7219c7f39a"><div class="ttname"><a href="classsylar_1_1FSUtil.html#ad23fa9a618ca7a0641fd1c7219c7f39a">sylar::FSUtil::Basename</a></div><div class="ttdeci">static std::string Basename(const std::string &amp;filename)</div><div class="ttdoc">返回文件名，即路径中最后一个/后面的部分</div><div class="ttdef"><b>Definition:</b> util.cpp:311</div></div>
<div class="ttc" id="aclasssylar_1_1FSUtil_html_aff8e1690b306cbb5d66586c77377c683"><div class="ttname"><a href="classsylar_1_1FSUtil.html#aff8e1690b306cbb5d66586c77377c683">sylar::FSUtil::Mkdir</a></div><div class="ttdeci">static bool Mkdir(const std::string &amp;dirname)</div><div class="ttdoc">创建路径，相当于mkdir -p</div><div class="ttdef"><b>Definition:</b> util.cpp:186</div></div>
<div class="ttc" id="aclasssylar_1_1StringUtil_html"><div class="ttname"><a href="classsylar_1_1StringUtil.html">sylar::StringUtil</a></div><div class="ttdoc">字符串辅助类</div><div class="ttdef"><b>Definition:</b> util.h:227</div></div>
<div class="ttc" id="aclasssylar_1_1StringUtil_html_a08d9e77c34393d5c6a4ef945839c558f"><div class="ttname"><a href="classsylar_1_1StringUtil.html#a08d9e77c34393d5c6a4ef945839c558f">sylar::StringUtil::Formatv</a></div><div class="ttdeci">static std::string Formatv(const char *fmt, va_list ap)</div><div class="ttdoc">vprintf风格的字符串格式化，返回格式化后的string</div><div class="ttdef"><b>Definition:</b> util.cpp:388</div></div>
<div class="ttc" id="aclasssylar_1_1StringUtil_html_a0a812b3307ea4806851dbeabdbf1cb20"><div class="ttname"><a href="classsylar_1_1StringUtil.html#a0a812b3307ea4806851dbeabdbf1cb20">sylar::StringUtil::Trim</a></div><div class="ttdeci">static std::string Trim(const std::string &amp;str, const std::string &amp;delimit=&quot; \t\r\n&quot;)</div><div class="ttdoc">移除字符串首尾的指定字符串</div><div class="ttdef"><b>Definition:</b> util.cpp:507</div></div>
<div class="ttc" id="aclasssylar_1_1StringUtil_html_a1fb3054f978e1f835831135b10276f2e"><div class="ttname"><a href="classsylar_1_1StringUtil.html#a1fb3054f978e1f835831135b10276f2e">sylar::StringUtil::UrlEncode</a></div><div class="ttdeci">static std::string UrlEncode(const std::string &amp;str, bool space_as_plus=true)</div><div class="ttdoc">url编码</div><div class="ttdef"><b>Definition:</b> util.cpp:445</div></div>
<div class="ttc" id="aclasssylar_1_1StringUtil_html_a37d7185797b931c1be452f33570c3a3a"><div class="ttname"><a href="classsylar_1_1StringUtil.html#a37d7185797b931c1be452f33570c3a3a">sylar::StringUtil::TrimRight</a></div><div class="ttdeci">static std::string TrimRight(const std::string &amp;str, const std::string &amp;delimit=&quot; \t\r\n&quot;)</div><div class="ttdoc">移除字符尾部的指定字符串</div><div class="ttdef"><b>Definition:</b> util.cpp:524</div></div>
<div class="ttc" id="aclasssylar_1_1StringUtil_html_a75982835040860f66162f9de0cfa53e6"><div class="ttname"><a href="classsylar_1_1StringUtil.html#a75982835040860f66162f9de0cfa53e6">sylar::StringUtil::UrlDecode</a></div><div class="ttdeci">static std::string UrlDecode(const std::string &amp;str, bool space_as_plus=true)</div><div class="ttdoc">url解码</div><div class="ttdef"><b>Definition:</b> util.cpp:476</div></div>
<div class="ttc" id="aclasssylar_1_1StringUtil_html_a7f53849da25b4642d8780143cfe6ef70"><div class="ttname"><a href="classsylar_1_1StringUtil.html#a7f53849da25b4642d8780143cfe6ef70">sylar::StringUtil::Format</a></div><div class="ttdeci">static std::string Format(const char *fmt,...)</div><div class="ttdoc">printf风格的字符串格式化，返回格式化后的string</div><div class="ttdef"><b>Definition:</b> util.cpp:380</div></div>
<div class="ttc" id="aclasssylar_1_1StringUtil_html_ab00e98fdad318537efe7c95bffd71426"><div class="ttname"><a href="classsylar_1_1StringUtil.html#ab00e98fdad318537efe7c95bffd71426">sylar::StringUtil::StringToWString</a></div><div class="ttdeci">static std::wstring StringToWString(const std::string &amp;s)</div><div class="ttdoc">字符串转宽字符串</div><div class="ttdef"><b>Definition:</b> util.cpp:545</div></div>
<div class="ttc" id="aclasssylar_1_1StringUtil_html_adf7d7bc32715c9c3c09ccd9457190a16"><div class="ttname"><a href="classsylar_1_1StringUtil.html#adf7d7bc32715c9c3c09ccd9457190a16">sylar::StringUtil::WStringToString</a></div><div class="ttdeci">static std::string WStringToString(const std::wstring &amp;ws)</div><div class="ttdoc">宽字符串转字符串</div><div class="ttdef"><b>Definition:</b> util.cpp:532</div></div>
<div class="ttc" id="aclasssylar_1_1StringUtil_html_af372a93baa56673ef9b33cf586253e97"><div class="ttname"><a href="classsylar_1_1StringUtil.html#af372a93baa56673ef9b33cf586253e97">sylar::StringUtil::TrimLeft</a></div><div class="ttdeci">static std::string TrimLeft(const std::string &amp;str, const std::string &amp;delimit=&quot; \t\r\n&quot;)</div><div class="ttdoc">移除字符串首部的指定字符串</div><div class="ttdef"><b>Definition:</b> util.cpp:516</div></div>
<div class="ttc" id="aclasssylar_1_1TypeUtil_html"><div class="ttname"><a href="classsylar_1_1TypeUtil.html">sylar::TypeUtil</a></div><div class="ttdoc">类型转换</div><div class="ttdef"><b>Definition:</b> util.h:199</div></div>
<div class="ttc" id="aclasssylar_1_1TypeUtil_html_a1799c89c36513c69f0da30cb1e7641c3"><div class="ttname"><a href="classsylar_1_1TypeUtil.html#a1799c89c36513c69f0da30cb1e7641c3">sylar::TypeUtil::Atof</a></div><div class="ttdeci">static double Atof(const std::string &amp;str)</div><div class="ttdoc">atof，参考atof(3)</div><div class="ttdef"><b>Definition:</b> util.cpp:352</div></div>
<div class="ttc" id="aclasssylar_1_1TypeUtil_html_a7a755d4f90a24997207928ed248ce598"><div class="ttname"><a href="classsylar_1_1TypeUtil.html#a7a755d4f90a24997207928ed248ce598">sylar::TypeUtil::ToChar</a></div><div class="ttdeci">static int8_t ToChar(const std::string &amp;str)</div><div class="ttdoc">转字符，返回*str.begin()</div><div class="ttdef"><b>Definition:</b> util.cpp:338</div></div>
<div class="ttc" id="aclasssylar_1_1TypeUtil_html_a7e9ed02f327254eabdfe73a8eea13539"><div class="ttname"><a href="classsylar_1_1TypeUtil.html#a7e9ed02f327254eabdfe73a8eea13539">sylar::TypeUtil::Atoi</a></div><div class="ttdeci">static int64_t Atoi(const std::string &amp;str)</div><div class="ttdoc">atoi，参考atoi(3)</div><div class="ttdef"><b>Definition:</b> util.cpp:345</div></div>
<div class="ttc" id="autil_8cpp_html_a0c9db554dae766cd39a3785fc47dc5b3"><div class="ttname"><a href="util_8cpp.html#a0c9db554dae766cd39a3785fc47dc5b3">sylar::ToLower</a></div><div class="ttdeci">std::string ToLower(const std::string &amp;name)</div><div class="ttdoc">字符串转小写</div><div class="ttdef"><b>Definition:</b> util.cpp:115</div></div>
<div class="ttc" id="autil_8cpp_html_a11e102f2ca9ed35760090afccd9387ff"><div class="ttname"><a href="util_8cpp.html#a11e102f2ca9ed35760090afccd9387ff">sylar::BacktraceToString</a></div><div class="ttdeci">std::string BacktraceToString(int size, int skip, const std::string &amp;prefix)</div><div class="ttdoc">获取当前栈信息的字符串</div><div class="ttdef"><b>Definition:</b> util.cpp:87</div></div>
<div class="ttc" id="autil_8cpp_html_a2a3eab16f42dad7f48ec91a2d15ac6b7"><div class="ttname"><a href="util_8cpp.html#a2a3eab16f42dad7f48ec91a2d15ac6b7">sylar::Time2Str</a></div><div class="ttdeci">std::string Time2Str(time_t ts, const std::string &amp;format)</div><div class="ttdoc">日期时间转字符串</div><div class="ttdef"><b>Definition:</b> util.cpp:121</div></div>
<div class="ttc" id="autil_8cpp_html_a3a496fbdbd27f04cba087a64add0306c"><div class="ttname"><a href="util_8cpp.html#a3a496fbdbd27f04cba087a64add0306c">sylar::GetElapsedMS</a></div><div class="ttdeci">uint64_t GetElapsedMS()</div><div class="ttdoc">获取当前启动的毫秒数，参考clock_gettime(2)，使用CLOCK_MONOTONIC_RAW</div><div class="ttdef"><b>Definition:</b> util.cpp:34</div></div>
<div class="ttc" id="autil_8cpp_html_a4188abb21419d9807897fd545f267dd5"><div class="ttname"><a href="util_8cpp.html#a4188abb21419d9807897fd545f267dd5">sylar::Str2Time</a></div><div class="ttdeci">time_t Str2Time(const char *str, const char *format)</div><div class="ttdoc">字符串转日期时间</div><div class="ttdef"><b>Definition:</b> util.cpp:129</div></div>
<div class="ttc" id="autil_8cpp_html_a7e8a51657b5b5289d1c530f5914bcee8"><div class="ttname"><a href="util_8cpp.html#a7e8a51657b5b5289d1c530f5914bcee8">sylar::GetThreadId</a></div><div class="ttdeci">pid_t GetThreadId()</div><div class="ttdoc">获取线程id</div><div class="ttdef"><b>Definition:</b> util.cpp:26</div></div>
<div class="ttc" id="autil_8cpp_html_a83fa12d12d237c60b894483ed72d0527"><div class="ttname"><a href="util_8cpp.html#a83fa12d12d237c60b894483ed72d0527">sylar::GetFiberId</a></div><div class="ttdeci">uint64_t GetFiberId()</div><div class="ttdoc">获取协程id</div><div class="ttdef"><b>Definition:</b> util.cpp:30</div></div>
<div class="ttc" id="autil_8cpp_html_a979537064cb924a4471df38add5686cb"><div class="ttname"><a href="util_8cpp.html#a979537064cb924a4471df38add5686cb">sylar::Backtrace</a></div><div class="ttdeci">void Backtrace(std::vector&lt; std::string &gt; &amp;bt, int size, int skip)</div><div class="ttdoc">获取当前的调用栈</div><div class="ttdef"><b>Definition:</b> util.cpp:69</div></div>
<div class="ttc" id="autil_8cpp_html_aa2c597c6caae5df27aa7cc95c75fadfe"><div class="ttname"><a href="util_8cpp.html#aa2c597c6caae5df27aa7cc95c75fadfe">sylar::GetCurrentUS</a></div><div class="ttdeci">uint64_t GetCurrentUS()</div><div class="ttdoc">获取当前时间的微秒</div><div class="ttdef"><b>Definition:</b> util.cpp:103</div></div>
<div class="ttc" id="autil_8cpp_html_ade7d65909cd0ce7f024ae7593ddc21e9"><div class="ttname"><a href="util_8cpp.html#ade7d65909cd0ce7f024ae7593ddc21e9">sylar::ToUpper</a></div><div class="ttdeci">std::string ToUpper(const std::string &amp;name)</div><div class="ttdoc">字符串转大写</div><div class="ttdef"><b>Definition:</b> util.cpp:109</div></div>
<div class="ttc" id="autil_8cpp_html_ae2cc9a02f0465026fe60111cbb58b636"><div class="ttname"><a href="util_8cpp.html#ae2cc9a02f0465026fe60111cbb58b636">sylar::SetThreadName</a></div><div class="ttdeci">void SetThreadName(const std::string &amp;name)</div><div class="ttdoc">设置线程名称，参考pthread_setname_np(3)</div><div class="ttdef"><b>Definition:</b> util.cpp:46</div></div>
<div class="ttc" id="autil_8cpp_html_ae39a238868576cbc0c1fac03221e3d60"><div class="ttname"><a href="util_8cpp.html#ae39a238868576cbc0c1fac03221e3d60">sylar::GetCurrentMS</a></div><div class="ttdeci">uint64_t GetCurrentMS()</div><div class="ttdoc">获取当前时间的毫秒</div><div class="ttdef"><b>Definition:</b> util.cpp:97</div></div>
<div class="ttc" id="autil_8cpp_html_aec6beb0b77d38e3928b748438b86a1aa"><div class="ttname"><a href="util_8cpp.html#aec6beb0b77d38e3928b748438b86a1aa">sylar::GetThreadName</a></div><div class="ttdeci">std::string GetThreadName()</div><div class="ttdoc">获取线程名称，参考pthread_getname_np(3)</div><div class="ttdef"><b>Definition:</b> util.cpp:40</div></div>
<div class="ttc" id="autil_8h_html_a2ba133bec98e7a279fe30ff590f9d58e"><div class="ttname"><a href="util_8h.html#a2ba133bec98e7a279fe30ff590f9d58e">sylar::TypeToName</a></div><div class="ttdeci">const char * TypeToName()</div><div class="ttdoc">获取T类型的类型字符串</div><div class="ttdef"><b>Definition:</b> util.h:219</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
